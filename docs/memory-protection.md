# 🛡️ 内存保护功能

## 功能概述

新增了实时内存和CPU监控功能，在菜单折叠位置显示系统资源使用情况，并提供自动内存保护机制。

## 功能特性

### 📊 实时监控
- **内存使用率**: 显示系统总内存使用百分比
- **CPU使用率**: 显示实时CPU使用情况
- **应用内存**: 显示当前应用程序的内存占用
- **WebView统计**: 显示当前活跃的WebView数量

### 🚨 智能预警
- **绿色 (正常)**: 内存使用 < 80%
- **橙色 (警告)**: 内存使用 80% - 90%
- **红色 (危险)**: 内存使用 > 90%

### 🔧 自动保护
- 当系统内存使用超过90%时，会显示"内存超负荷"警告
- 提供"强制清理非活跃页面"按钮，一键关闭非活跃的WebView
- 自动保护机制确保系统稳定运行

## 显示模式

### 折叠状态
- 显示一个彩色圆点指示内存状态
- 显示内存使用百分比

### 展开状态
- 详细的内存和CPU使用图表
- 实时数据更新 (每2秒)
- 应用程序和WebView统计信息
- 内存超负荷时的快速清理按钮

## 技术实现

### 后端 (主进程)
- **ipcMain.handle("get-system-stats")**: 获取系统资源信息
- **ipcMain.handle("force-close-inactive-webviews")**: 强制关闭非活跃WebView
- 使用Node.js原生API获取系统内存和CPU信息

### 前端 (渲染进程)
- **MemoryMonitor组件**: 实时显示监控信息
- **systemAPI**: 与主进程通信的API接口
- 自动更新机制和用户交互

## 使用方法

1. **查看实时监控**: 监控信息会自动显示在左侧菜单的折叠按钮上方
2. **展开详细信息**: 展开菜单查看详细的内存和CPU使用情况
3. **内存清理**: 当出现红色警告时，点击"强制清理非活跃页面"按钮
4. **状态指示**: 通过颜色快速判断系统资源状态

## 安全特性

- 只关闭非活跃的WebView，保护当前正在使用的页面
- 提供回退机制，确保关键功能正常运行
- 实时监控，防止系统资源耗尽导致的卡顿或崩溃

## 注意事项

- 内存监控每2秒更新一次，避免过度占用系统资源
- 强制清理功能会关闭后台的WebView实例，但不会影响数据
- 建议在内存使用率超过80%时关注监控信息，超过90%时立即清理

---

这个功能旨在提升多浏览器环境下的系统稳定性和用户体验，确保长时间使用不会因为内存不足而影响性能。
