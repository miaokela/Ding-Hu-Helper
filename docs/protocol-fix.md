# 协议注册问题解决方案

## 问题描述

如果你在 Windows 系统中遇到以下问题：
- 打开巨量千川等网页时，会自动启动此应用程序
- 应用程序重复启动
- 浏览器中的某些链接会触发应用启动

这是因为应用程序之前在 Windows 系统中注册了协议处理器（如 `douyin://`、`bytedance://` 等）。

## 解决方案

### 方法一：使用内置清理（推荐）

应用程序现在会在启动时自动清理这些协议注册。只需要：

1. 重新启动应用程序
2. 检查控制台输出，确认协议已被移除

### 方法二：手动运行清理脚本

```bash
# 运行协议清理脚本
yarn clean:protocols
```

### 方法三：Windows 批处理清理

在项目根目录下运行：

```bash
clean-protocol-registry.bat
```

此批处理文件会直接清理 Windows 注册表中的协议条目。

### 方法四：手动清理注册表

如果以上方法都不起作用，可以手动清理注册表：

1. 按 `Win + R`，输入 `regedit` 打开注册表编辑器
2. 导航到以下位置并删除相关条目：
   - `HKEY_CURRENT_USER\Software\Classes\`
   - `HKEY_LOCAL_MACHINE\SOFTWARE\Classes\`
3. 查找并删除以下协议条目：
   - `bytedance`
   - `douyin`
   - `toutiao`
   - `xigua`
   - `aweme`
   - `snssdk`

## 预防措施

- 应用程序现在不再注册这些协议
- webview 中会拦截这些协议链接，防止触发外部应用
- 添加了多层保护机制

## 验证是否修复

清理后，你可以：

1. 打开巨量千川网页
2. 点击页面中可能包含协议链接的按钮
3. 确认不会再启动新的应用程序实例

如果问题仍然存在，请检查是否有其他应用程序也注册了这些协议。
