<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electronå®¢æˆ·ç«¯å¯¹è¯æ¡†æ‹¦æˆªæµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-button {
            display: inline-block;
            margin: 10px;
            padding: 15px 20px;
            background: #FF3B30;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.2s;
        }
        .test-button:hover {
            background: #D70015;
        }
        .safe-button {
            background: #34C759;
        }
        .safe-button:hover {
            background: #248A3D;
        }
        .log {
            background: #f8f8f8;
            border: 1px solid #ddd;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            font-family: Monaco, Consolas, monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            color: #856404;
        }
    </style>
</head>
<body>
    <h1>ğŸ”¥ Electronå®¢æˆ·ç«¯å¯¹è¯æ¡†æ‹¦æˆªæµ‹è¯•</h1>
    
    <div class="warning">
        <strong>âš ï¸ é‡è¦è¯´æ˜ï¼š</strong>
        æ­¤é¡µé¢ä¸“é—¨æµ‹è¯•Electronå®¢æˆ·ç«¯çº§åˆ«çš„å¯¹è¯æ¡†æ‹¦æˆªåŠŸèƒ½ã€‚
        å¦‚æœæ‹¦æˆªæˆåŠŸï¼Œæ‚¨å°†ä¸ä¼šçœ‹åˆ°ç³»ç»Ÿå¼¹çª—ï¼Œè€Œæ˜¯åœ¨æ§åˆ¶å°çœ‹åˆ°æ‹¦æˆªæ—¥å¿—ã€‚
    </div>

    <div class="test-section">
        <h2>ğŸš¨ æ¨¡æ‹Ÿåè®®å¼¹çª—æµ‹è¯•</h2>
        <p>ä»¥ä¸‹æŒ‰é’®ä¼šè§¦å‘åŒ…å«åè®®å…³é”®è¯çš„ç³»ç»Ÿå¯¹è¯æ¡†ï¼Œåº”è¯¥è¢«Electronå®¢æˆ·ç«¯æ‹¦æˆªï¼š</p>
        
        <button class="test-button" onclick="testProtocolConfirm()">æµ‹è¯•åè®®confirmå¼¹çª—</button>
        <button class="test-button" onclick="testProtocolAlert()">æµ‹è¯•åè®®alertå¼¹çª—</button>
        <button class="test-button" onclick="testProtocolVariations()">æµ‹è¯•åè®®å˜ä½“å¼¹çª—</button>
        <button class="test-button" onclick="testMultipleProtocols()">æµ‹è¯•å¤šç§åè®®å¼¹çª—</button>
    </div>

    <div class="test-section">
        <h2>âœ… æ­£å¸¸å¼¹çª—æµ‹è¯•</h2>
        <p>ä»¥ä¸‹æŒ‰é’®ä¼šè§¦å‘æ­£å¸¸çš„å¯¹è¯æ¡†ï¼Œåº”è¯¥æ­£å¸¸æ˜¾ç¤ºï¼š</p>
        
        <button class="test-button safe-button" onclick="testNormalConfirm()">æµ‹è¯•æ­£å¸¸confirm</button>
        <button class="test-button safe-button" onclick="testNormalAlert()">æµ‹è¯•æ­£å¸¸alert</button>
    </div>

    <div class="test-section">
        <h2>ğŸ“Š æµ‹è¯•ç»“æœæ—¥å¿—</h2>
        <div id="log" class="log">
            <div>ğŸ“ æµ‹è¯•æ—¥å¿—å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</div>
            <div>ğŸ” è¯·åŒæ—¶è§‚å¯Ÿæµè§ˆå™¨æ§åˆ¶å°å’ŒElectronæ§åˆ¶å°çš„è¾“å‡º</div>
        </div>
    </div>

    <script>
        function log(message) {
            const logDiv = document.getElementById('log');
            const div = document.createElement('div');
            const timestamp = new Date().toLocaleTimeString();
            div.innerHTML = `<span style="color: #666;">${timestamp}</span> - ${message}`;
            logDiv.appendChild(div);
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(message);
        }

        function testProtocolConfirm() {
            log('ğŸ§ª æµ‹è¯•åè®®confirm: "æœªè®¾å®šç”¨æ¥æ‰“å¼€URL bytedance://dispatch_message/"');
            try {
                const result = confirm('æœªè®¾å®šç”¨æ¥æ‰“å¼€URL bytedance://dispatch_message/çš„åº”ç”¨ç¨‹åºã€‚æ‚¨æƒ³è¦è®¾ç½®é»˜è®¤åº”ç”¨ç¨‹åºå—ï¼Ÿ');
                log(`ğŸ“Š confirmè¿”å›ç»“æœ: ${result}`);
                if (result === true) {
                    log('âœ… å¯èƒ½è¢«æ‹¦æˆªå¹¶è¿”å›true');
                } else {
                    log('âŒ ç”¨æˆ·ç‚¹å‡»äº†å–æ¶ˆæˆ–å¼¹çª—æ­£å¸¸æ˜¾ç¤º');
                }
            } catch (error) {
                log('âŒ confirmè°ƒç”¨å‡ºé”™: ' + error.message);
            }
        }

        function testProtocolAlert() {
            log('ğŸ§ª æµ‹è¯•åè®®alert: "æ— æ³•æ‰“å¼€protocolé“¾æ¥"');
            try {
                alert('æ— æ³•æ‰“å¼€protocolé“¾æ¥ï¼šbytedance://dispatch_message/');
                log('ğŸ“Š alertæ‰§è¡Œå®Œæˆ');
            } catch (error) {
                log('âŒ alertè°ƒç”¨å‡ºé”™: ' + error.message);
            }
        }

        function testProtocolVariations() {
            log('ğŸ§ª æµ‹è¯•åè®®å˜ä½“å¼¹çª—');
            
            const protocolMessages = [
                'æ²¡æœ‰è®¾ç½®ç”¨æ¥æ‰“å¼€URL douyin://profile',
                'Open with external application for toutiao://',
                'No application found for protocol bytedance-frontend://',
                'è®¾ç½®é»˜è®¤åº”ç”¨æ¥å¤„ç†æ­¤åè®®'
            ];

            protocolMessages.forEach((message, index) => {
                setTimeout(() => {
                    log(`ğŸ§ª æµ‹è¯•å˜ä½“ ${index + 1}: "${message}"`);
                    try {
                        const result = confirm(message);
                        log(`ğŸ“Š å˜ä½“ ${index + 1} è¿”å›: ${result}`);
                    } catch (error) {
                        log(`âŒ å˜ä½“ ${index + 1} å‡ºé”™: ${error.message}`);
                    }
                }, index * 1000);
            });
        }

        function testMultipleProtocols() {
            log('ğŸ§ª æµ‹è¯•å¤šç§åè®®è¿ç»­å¼¹çª—');
            
            const protocols = ['bytedance', 'douyin', 'toutiao', 'aweme'];
            
            protocols.forEach((protocol, index) => {
                setTimeout(() => {
                    const message = `æœªè®¾å®šç”¨æ¥æ‰“å¼€URL ${protocol}://test çš„åº”ç”¨ç¨‹åº`;
                    log(`ğŸ§ª æµ‹è¯•åè®® ${protocol}: "${message}"`);
                    try {
                        alert(message);
                        log(`ğŸ“Š åè®® ${protocol} alertå®Œæˆ`);
                    } catch (error) {
                        log(`âŒ åè®® ${protocol} å‡ºé”™: ${error.message}`);
                    }
                }, index * 800);
            });
        }

        function testNormalConfirm() {
            log('ğŸ§ª æµ‹è¯•æ­£å¸¸confirm: "è¿™æ˜¯ä¸€ä¸ªæ­£å¸¸çš„ç¡®è®¤å¯¹è¯æ¡†"');
            try {
                const result = confirm('è¿™æ˜¯ä¸€ä¸ªæ­£å¸¸çš„ç¡®è®¤å¯¹è¯æ¡†ï¼Œä¸åŒ…å«åè®®å…³é”®è¯ã€‚ç¡®å®šç»§ç»­å—ï¼Ÿ');
                log(`ğŸ“Š æ­£å¸¸confirmè¿”å›ç»“æœ: ${result}`);
            } catch (error) {
                log('âŒ æ­£å¸¸confirmå‡ºé”™: ' + error.message);
            }
        }

        function testNormalAlert() {
            log('ğŸ§ª æµ‹è¯•æ­£å¸¸alert: "è¿™æ˜¯ä¸€ä¸ªæ­£å¸¸çš„è­¦å‘Šå¯¹è¯æ¡†"');
            try {
                alert('è¿™æ˜¯ä¸€ä¸ªæ­£å¸¸çš„è­¦å‘Šå¯¹è¯æ¡†ï¼Œåº”è¯¥æ­£å¸¸æ˜¾ç¤ºã€‚');
                log('ğŸ“Š æ­£å¸¸alertæ‰§è¡Œå®Œæˆ');
            } catch (error) {
                log('âŒ æ­£å¸¸alertå‡ºé”™: ' + error.message);
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„æç¤º
        document.addEventListener('DOMContentLoaded', function() {
            log('ğŸ“± é¡µé¢åŠ è½½å®Œæˆï¼ŒElectronå®¢æˆ·ç«¯å¯¹è¯æ¡†æ‹¦æˆªæµ‹è¯•å‡†å¤‡å°±ç»ª');
            log('ğŸ” é¢„æœŸè¡Œä¸ºï¼š');
            log('  â€¢ åè®®ç›¸å…³å¼¹çª— â†’ åº”è¯¥è¢«æ‹¦æˆªï¼Œä¸æ˜¾ç¤ºç³»ç»Ÿå¼¹çª—');
            log('  â€¢ æ­£å¸¸å¼¹çª— â†’ åº”è¯¥æ­£å¸¸æ˜¾ç¤º');
            log('  â€¢ æ§åˆ¶å° â†’ æ˜¾ç¤ºæ‹¦æˆªæ—¥å¿—');
        });

        // ç›‘å¬é¡µé¢ä¸Šçš„æ‰€æœ‰ç‚¹å‡»
        document.addEventListener('click', function(e) {
            if (e.target.tagName === 'BUTTON') {
                log(`ğŸ–±ï¸ ç‚¹å‡»æŒ‰é’®: ${e.target.textContent}`);
            }
        });
    </script>
</body>
</html>
